//= require social_stream/callback

SocialStream.Audio = (function(SS, $, undefined){
  var callback = new SS.Callback();

  var initJplayer = function(){
    $(".jp-audio .jp-jplayer").each(function() {
      var container = $(this).closest('.audio-container');

      $(this).jPlayer({
        ready: function () {
          $(this).jPlayer("setMedia", {
            webma: container.attr("data-url-webma"),
            mp3: container.attr("data-url-mp3"),
            wav: container.attr("data-url-wav")
          });
        },
      preload: "none",
      supplied: "webma, mp3, wav",
      swfPath: container.attr('data-url-swfplayer'),
      cssSelectorAncestor: "#" + container.attr("id")
      })
    });
  }

  callback.register('show', initJplayer);

  return callback.extend({
  });

})(SocialStream, jQuery);
